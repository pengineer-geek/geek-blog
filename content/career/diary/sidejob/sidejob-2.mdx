---
title: "副業初案件(インフラ構築)が無茶苦茶だった話"
slug: "career/diary/sidejob/sidejob-2"
hero: { file: "cover.jpg", alt: "副業インフラ構築の混乱" }
date: "2025-09-05"
updated: "2025-09-05"
tags: ["副業", "インフラエンジニア", "AWS"]
excerpt: "stgとdevの命名地獄──"
category: "career"
sectionKey: "diary"
subKey: "sidejob"
order: 2
---

# 副業初案件が無茶苦茶だった話
stgとdevの命名地獄──

## はじめに

副業エンジニアとして契約が決まったあと、
最初に任されたのはインフラ構築案件だった。

構築するのは「検証(stg)環境」。

だが、これが想像以上にカオスだった

──副業デビュー早々、命名の闇と格闘することになった。

---

## 案件概要と背景

委託元ではこれまで、開発（dev）環境と本番（prod）環境の2つしか存在しなかった。

しかし開発と本番の乖離が大きくなり、 **「検証(stg)環境を新設したい」** という要望が出てきた。

受注元はインフラ担当者が退職しており、
社内に構築できる人間がいなかったため、


**副業である私にその任務が託された**

──というのが経緯である。

---

## 見立ての甘さ

最初はこう思っていた。

> 「dev環境を再現すれば済む話だろう」

ところが、現実はそう甘くなかった。

* Elastic Beanstalk や CloudFormation のようなインフラ管理基盤は **存在しない**
* 全て **手作業で構築されたリソース群** で構成されている

ここまでは想定の範囲内だった。

しかし次の事実に直面し、私は完全に混乱した。

> **dev環境のリソース名に stg\_ のプレフィックスが付いている**

さらに──

* ドメイン名： `dev.example.com`
* リソース名： `stg_app_server`, `stg_db` など
* タグ： `env=dev` と `env=stg` が混在

つまり、 **dev環境なのにstgが付いており、タグも信用できない。**

命名ルールは崩壊しており、どれが本物のdevか、そもそもstgという言葉がどう使われていたのか、誰も答えられなかった。

---

## 決断と妥協

情報を整理した結果、私は以下のような構成でstg環境を定義することにした。

| 環境           | リソースプレフィックス | ドメイン名             | タグの運用                               |
| ------------ | ----------- | ----------------- | ----------------------------------- |
| dev環境(元からある) | `stg_***`   | `dev.example.com` | `env=dev`, `env=stg` が混在            |
| **新規のstg環境**(私が作る) | `dev_***`   | `stg.example.com` | `env=stg` を優先。使われていれば `env=staging` |

改めて見ると

> あーもうメチャクチャだよ

って感想しか出てこない──

この時点で既に破綻しているようにも思えたが、 **先方はこれで問題ないという判断だった。**

さらに、契約上、インフラ構成のコード管理（Terraform等）は **対象外**。

「コード化すると追加費用がかかるから」という理由で、

私は **手作業で構築し、構成は自分のメモで管理する** というアクロバティックな業務に臨むことになった。

---

## 納品と割り切り

納品は無事完了した。

細部に言いたいことは山ほどあったが、

**「副業の立場」である自分にそこまでの口出しは許されない**。

一歩引いて、要望を満たすことに徹した。

その後、どう使われたのかは知らない。
（※実は1年後、後日談があるのだが、それはまた別の話）

こうして、**私の副業初案件は混乱とともに終わりを迎えた。**

---

## おわりに

副業といえど、任される責任は小さくない。
特にインフラのような“土台”部分は、名前一つ、構成一つが混乱を招く。

**命名の統一、ドキュメントの整備、タグの設計──**

それらが無いだけで、構築コストは数倍になる。

副業は自由だが、自由にするには戦略が必要である──
そんなことを、初案件から痛感させられた。

---

## 収支

実働40時間くらいで +20万円ほどGET 🐧💰